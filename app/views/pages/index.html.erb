<input id="currentUser" type="hidden" value="<%= current_user.account.id %>">
<div id="app">


<!-- Amount available -->
<div class="progress">
  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="5000" aria-valuemin="0" aria-valuemax="6000" v-bind:style="{width: pmPercentage}">
      <span class="sr-only">{{pmPercentage}} Complete (success)</span>
  </div>
</div>
<div class="pocket-money, card">
    <div class="card-block">
      <h1> 
        Pocket Money: {{ '$' + Number(pocketMoney).toFixed(2) }}
      </h1>
    </div>
    <div>
      <h3>
        Current Balance: {{currentBalance}}
      </h3>
    </div>
</div>

<div class="pocket-money, card">
    <div class="card-block">

<h2>Actions</h2>
    <!-- Add an expense -->
      <button v-on:click="unHideExpenseForm()">Add Expense</button>
      <form v-if="hideExpenseForm" class="form-horizontal">
        <fieldset>
            <div class="form-group">
                <label for="inputEmail" class="col-md-2 control-label">Amount</label>

                <div class="col-md-10">
                    <input type="text" class="form-control" id="inputEmail" placeholder="Email" v-model="newExpAmount" name="amount">
                </div>
            </div>
            <div class="form-group" >
                <label for="select111" class="col-md-2 control-label">Select</label>

                <div class="col-md-10" v-if="tags.length !== 0">
                    <select id="select111" class="form-control selectpicker">
                        <option v-for="tag in tags" v-bind:value="tag.id">{{tag.description}}</option>
                    </select>
                </div>
            </div>
        <div v-if="tags.length !== 0">Tag (optional):
          <select v-model="tagID">
              <option v-for="tag in tags" v-bind:value="tag.id">{{tag.description}}</option>
          </select>
        </div>
      <!-- TAG -->
    <div class="action">
        <div>
          <button v-on:click="newTag()">Create a New Tag</button>
          <div v-if="newTagForm">
            Tag Name:<input type="text" v-model=newTagDescription>
            <button v-on:click="addNewTag(newTagDescription)">Add</button>
          </div>
        </div>
        <div>Coming in or going out?</div>
          <select v-model="newExpImpact">
            <option value="In">Received</option>
            <option value="out">Paid</option>
          </select>
        <button v-on:click="addExpense(newExpAmount, tagID, newExpImpact)">Submit</button>

              </fieldset>
      </form>

    </div>

      <!-- Update Bank Balance -->

        <button v-on:click="unHideAccountForm()">Update Bank Balance</button>
        <div v-if="accountUpdateForm">Update your current Bank Balance<input type="text" v-model="lastBalance">
          <div>Do you need to calculate pocket money for more than the next 30 days?  Select a period.
            <select v-model="pocketTime">
              <option value="30">30 days</option>
              <option value="60">60 days</option>
              <option value="90">90 days</option>
            </select>
          </div>
          <button v-on:click="updateAccount()">Update</button>
        </div>
  </div>

        <div id="expenses-list">
          <div class="card-header">
            <h3 class="card-title">
              <i class="zmdi zmdi-graduation-cap"></i>Spending History</h3>
          </div>
          <table class="table table-no-border table-striped">
            <thead>
              <tr>
                <th>Date</th>
                <th>Amount</th>
                <th>Tag</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="expense in sortedExpenses">
                <td>{{expense.date}} </td>
                <td>{{expense.amount}} </td>
                <td>{{expense.tag_description}} </td>
                <td><button v-on:click="deleteExpense(expense.id, expense.amount)">delete</button></td>
              </tr>
            </tbody>
          </table>
             
        </div>
          
      </div>

    </div>
</div>





